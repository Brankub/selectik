(function(a){var b=false;var c=false;a.selectik=function(d,e){var f,g,h,i,j,k,l,m,n,o,p=false,q="",r=false,s;var t,u,v,t,w,x,y,z;var A={containerClass:"custom-select",width:0,maxItems:0,customScroll:1,speedAnimation:200};var B=this;B.settings={};var C=a(d),D=d;B.init=function(){s=a.extend({},A,e);E();M()};var E=function(){C.wrap('<div class="'+s.containerClass+'"></div>');x=C.parent();F({refreshSelect:false})};var F=function(b){var c="";f=D.length;if(b.refreshSelect){a("ul",x).remove()}z=a("option",C);for(var d=0;d<z.length;d++){var e=a(z[d]);j=e.attr("disabled")==="disabled"?"disabled":"";var h=e.attr("value");c+='<li class="'+j+'" data-value="'+h+'">'+h+"</li>"}var i=s.maxItems>0&&s.customScroll==1?'<div class="select-scroll"><span class="scroll-drag"><!-- --></span></div>':"";var k=s.customScroll==1?"custom-scroll":"default-scroll";var l=a("option:selected",C);if(b.refreshSelect){c="<ul>"+c+"</ul>";a(c).prependTo(a(".select-list",x))}else{c='<span class="custom-text">'+l.attr("value")+'</span><div class="select-list '+k+'">'+i+"<ul>"+c+"</ul></div>";a(c).prependTo(x)}u=a("ul",x);v=a(".custom-text",x);t=a(".select-list",x);a("li:eq("+l.index()+")",u).addClass("selected");x.removeClass("done");var m=s.width>0?s.width:C.outerWidth();B.setWidthCS(m);g=parseInt(t.css("top"));G({refreshSelect:b.refreshSelect})};var G=function(b){if(!b.refreshSelect){h=a("li:nth-child(1)",u).outerHeight()}if(f<s.maxItems||s.maxItems==0){t.hide();x.addClass("done");return}p=true;k=h*f;i=h*s.maxItems;u.css("height",i);t.hide();x.addClass("done");if(s.customScroll==1){H()}};var H=function(){var b;var c=h*f;l=-c+i;y=a(".select-scroll",t);y.css("height",i);w=a(".scroll-drag",t);t.addClass("maxlength");m=c/i;o=i*(i/c);w.css("height",o);if(a(".selected",u).length>0){L(a(".selected",u).index())}if(s.customScroll==true){I()}};var I=function(){u.bind("mousewheel",function(a,b){n=parseInt(u.css("top"))+b*h;K(n);return false});y.click(function(b){var c=(b.pageY-a(this).offset().top)/i>.5?-1:1;n=parseInt(u.css("top"))+h*c;K(n);return false});w.on("mousedown",function(a){J(a,true)});a(document).on("mouseup",function(a){J(a,false)})};var J=function(c,d){if(d){if(c.preventDefault()){c.preventDefault()}var e=parseInt(w.css("top"));var f=c.clientY;a(document).bind("mousemove",function(a){var b=f-a.clientY-e;K(b*m)})}else{a(document).unbind("mousemove");b=true}};var K=function(a){a=a>0?0:a;a=a<l?l:a;u.css("top",a);w.css("top",-a/m)};var L=function(d){if(d<0||d==f){return}var e=d>f-s.maxItems?k-i:h*d;a(".selected",u).removeClass("selected");a("li:nth-child("+(d+1)+")",u).addClass("selected");if(b&&c){v.text(a("li:nth-child("+(d-1)+")",u).data("value"))}if(!p){return}K(-e)};var M=function(){C.on("change",function(){if(r){r=false;return false}O(a("option:selected",a(this)))});v.on("click",function(){if(x.hasClass("disable")){return false}C.focus();Q(t,false);return false});u.on("click","li",function(b){if(a(this).hasClass("disabled")){return false}O(a(this))});C.bind("keyup",function(a){N(a)})};var N=function(b){console.log(b.keyCode);if(b.keyCode==13||b.keyCode==27){Q(t,true)}if(!t.is(":visible")){Q(t,false)}C.change();if(p){L(a("option:selected",C).index())}};var O=function(a){var b=a.parents("select").length>0?a.attr("value"):a.data("value");P(b,a.index()+1)};var P=function(b,c){if(c>f||c==0){return false}r=true;C.attr("value",b).change();a(".selected",u).removeClass("selected");a("li:nth-child("+c+")",u).addClass("selected");v.text(b);console.timeEnd("change")};var Q=function(c,d){a(".custom-select.open").children(".select-list").stop(true,true).fadeOut(s.speedAnimation).parent().toggleClass("open");if(d){return}b=false;B.positionCS(c);c.stop(true,true).fadeToggle(s.speedAnimation);c.parent().toggleClass("open");setTimeout(function(){b=true},s.speedAnimation)};B.hideCS=function(){t.fadeOut(s.speedAnimation);x.removeClass("open");b=true};B.showCS=function(){b=false;t.fadeIn(s.speedAnimation);x.addClass("open")};B.positionCS=function(b){elParent=b.parent();var c=p?s.maxItems*h:f*h;var d=p?s.maxItems:f;var e=a(window).outerHeight()-(elParent.offset().top-a(window).scrollTop())-elParent.outerHeight()<c?-d*h-elParent.outerHeight()/4:g;e=elParent.offset().top-a(window).scrollTop()<c?g:e;b.css("top",e)};B.refreshCS=function(){F({refreshSelect:true})};B.changeCS=function(b){var c=b.index>0?b.index:a('option[value="'+b.value+'"]',C).index()+1;var d=a("option:nth-child("+c+")",C).attr("value");P(d,c)};B.disableCS=function(){C.attr("disabled",true);x.addClass("disable")};B.enableCS=function(){C.attr("disabled",false);x.removeClass("disable")};B.setWidthCS=function(a){u.css("width",a);v.css("width",a)};B.init()};a.fn.selectik=function(b){return this.each(function(){if(undefined==a(this).data("selectik")){var c=new a.selectik(this,b);a(this).data("selectik",c)}})};a(window).resize(function(){if(b){if(!a(".custom-select.open").length>0){return}a(".custom-select.open").children("select").data("selectik").positionCS(a(".select-list:visible"))}});a(document).bind("click",function(){if(b){b=false;if(a(".custom-select.open").length>0){a(".custom-select.open").children("select").data("selectik").hideCS()}}})})(jQuery)