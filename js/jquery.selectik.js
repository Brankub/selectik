(function(b){var f=!1,n=!1;b.selectik=function(E,M){var k,w,j,l,F,G,x,y,H,p=!1,z=!1,e,g,h,q,r,d,A,B,s,N={containerClass:"custom-select",width:0,maxItems:0,customScroll:1,speedAnimation:200},i=this;i.settings={};var c=b(E);i.init=function(){e=b.extend({},N,M);c.wrap('<div class="'+e.containerClass+'"></div>');d=c.parent();I({refreshSelect:!1});var a=b('input[type="reset"]',c.parents("form"));0<a.length&&a.bind("click",function(){var a=0<s.length?s.index():0;C(b("option:eq("+a+")",c))});c.bind("change",
function(){if(z)return z=!1;C(b("option:selected",b(this)))});q.bind("click",function(){if(d.hasClass("disable"))return!1;c.focus();D(g,!1,!0)});c.bind("focus",function(){d.addClass("active")});c.bind("blur",function(){d.removeClass("active");f&&(i.hideCS(),c.parent().removeClass("active"))});c.bind("keyup",function(a){13==a.keyCode&&g.is(":visible")&&D(g,!0,!1);b.browser.msie||27==a.keyCode&&g.is(":visible")&&D(g,!0,!0);c.change();p&&J(b("option:selected",c).index())});b.browser.opera&&c.bind("keydown",
function(){n=!0})};var I=function(a){var m="";k=E.length;a.refreshSelect&&b("ul",d).remove();B=b("option",c);for(var t=0;t<B.length;t++){var f=b(B[t]);F="disabled"===f.attr("disabled")?"disabled":"";m+='<li class="'+F+'" data-value="'+f[0].value+'">'+f[0].text+"</li>"}t=0<e.maxItems&&1==e.customScroll?'<div class="select-scroll"><span class="scroll-drag"><\!-- --\></span></div>':"";f=1==e.customScroll?"custom-scroll":"default-scroll";s=b("option:selected",c);a.refreshSelect?b("<ul>"+m+"</ul>").prependTo(b(".select-list",
d)):(m='<span class="custom-text">'+s[0].text+'</span><div class="select-list '+f+'">'+t+"<ul>"+m+"</ul></div>",b(m).prependTo(d));h=b("ul",d);q=b(".custom-text",d);g=b(".select-list",d);g.on("mousedown","li",function(){if(b(this).hasClass("disabled"))return!1;C(b(this))});b("li:eq("+s.index()+")",h).addClass("selected");d.removeClass("done");m=0<e.width?e.width:c.outerWidth();i.setWidthCS(m);w=parseInt(g.css("top"));a.refreshSelect||(j=b("li:nth-child(1)",h).outerHeight());if(k<e.maxItems||0==e.maxItems)g.hide(),
d.addClass("done");else if(p=!0,G=j*k,l=j*e.maxItems,h.css("height",l),g.hide(),d.addClass("done"),1==e.customScroll&&(a=j*k,x=-a+l,A=b(".select-scroll",g),A.css("height",l),r=b(".scroll-drag",g),g.addClass("maxlength"),y=a/l,H=l*(l/a),r.css("height",H),0<b(".selected",h).length&&J(b(".selected",h).index()),e.customScroll)){var u;h.bind("mousewheel",function(a,b){u=parseInt(h.css("top"))+b*j;v(u);return!1});A.click(function(a){a=0.5<(a.pageY-b(this).offset().top)/l?-1:1;u=parseInt(h.css("top"))+j*
a;v(u);return!1});r.on("mousedown",function(a){K(a,!0)});b(document).on("mouseup",function(a){K(a,!1)})}},K=function(a,e){if(e){a.preventDefault()&&a.preventDefault();var c=parseInt(r.css("top")),d=a.clientY;b(document).bind("mousemove",function(a){v((d-a.clientY-c)*y)})}else b(document).unbind("mousemove"),f=!0},v=function(a){a=0<a?0:a;a=a<x?x:a;h.css("top",a);r.css("top",-a/y)},J=function(a){if(!(0>a||a==k)){var c=a>k-e.maxItems?G-l:j*a;b(".selected",h).removeClass("selected");b("li:nth-child("+
(a+1)+")",h).addClass("selected");p&&v(-c)}},C=function(a){var b=0<a.parents("select").length?a.attr("value"):a.data("value"),c=a.text();L(b,c,a.index()+1)},L=function(a,e,d){if(d>k||0==d)return!1;z=!0;c.attr("value",a).change();b(".selected",h).removeClass("selected");b("li:nth-child("+d+")",h).addClass("selected");q.text(e)},D=function(a,c,d){1==b("."+e.containerClass+".open_list").length&&b("."+e.containerClass+".open_list").children("select").data("selectik").hideCS();if(!d&&(b("."+e.containerClass+
".open_list").children(".select-list").stop(!0,!0).fadeOut(e.speedAnimation).parent().toggleClass("open_list"),c))return;f=!1;i.positionCS(a);a.stop(!0,!0).fadeToggle(e.speedAnimation);a.parent().toggleClass("open_list");setTimeout(function(){f=!0},e.speedAnimation)};i.hideCS=function(){g.fadeOut(e.speedAnimation);d.removeClass("open_list");c.focus();f=!0};i.showCS=function(){f=!1;g.fadeIn(e.speedAnimation);d.addClass("open_list")};i.positionCS=function(a){elParent=a.parent();var c=p?e.maxItems*j:
k*j,d=p?e.maxItems:k,d=b(window).outerHeight()-(elParent.offset().top-b(window).scrollTop())-elParent.outerHeight()<c?-d*j-elParent.outerHeight()/4:w,d=elParent.offset().top-b(window).scrollTop()<c?w:d;a.css("top",d)};i.refreshCS=function(){I({refreshSelect:!0})};i.changeCS=function(a){var a=0<a.index?a.index:b('option[value="'+a.value+'"]',c).index()+1,d=b("option:nth-child("+a+")",c).attr("value"),e=b("option:nth-child("+a+")",c).text();L(d,e,a)};i.disableCS=function(){c.attr("disabled",!0);d.addClass("disable")};
i.enableCS=function(){c.attr("disabled",!1);d.removeClass("disable")};i.requiredCS=function(){q.toggleClass("required")};i.setWidthCS=function(a){h.css("width",a);q.css("width",a)};i.init()};b.fn.selectik=function(f){return this.each(function(){if(!(0<b("optgroup",this).length||"multiple"==b(this).attr("multiple"))&&void 0==b(this).data("selectik")){var n=new b.selectik(this,f);b(this).data("selectik",n)}})};b(window).resize(function(){f&&!(0<!b(".open_list").length)&&b(".open_list").children("select").data("selectik").positionCS(b(".select-list:visible"))});
b(document).bind("click",function(){n?n=!1:f&&(f=!1,0<b(".open_list").length&&b(".open_list").children("select").data("selectik").hideCS())})})(jQuery);